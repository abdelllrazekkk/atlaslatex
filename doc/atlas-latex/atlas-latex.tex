%-------------------------------------------------------------------------------
% Guide to the use of the ATLAS LaTeX package
%-------------------------------------------------------------------------------
\documentclass[UKenglish]{style/atlasdoc}

\usepackage{style/atlaspackage}
\usepackage{style/atlasphysics}

% Use biblatex and biber for the bibliography
\usepackage[backend=biber,
	style=numeric-comp,sorting=none,block=ragged,firstinits=true]{biblatex}
\addbibresource{../atlas-latex.bib}

% Paths for figures
\graphicspath{{../../figures/},{figures/}}

% Shorthand for \phantom to use in tables
\newcommand{\pho}{\phantom{0}}
\newcommand{\BibTeX}{\textsc{Bib\TeX}}
\newcommand{\Macro}[1]{\textbackslash #1\xspace}

%-------------------------------------------------------------------------------
% Generic document information
%-------------------------------------------------------------------------------

% Author and title for the PDF file
\hypersetup{pdftitle={ATLAS LaTeX guide},pdfauthor={Ian Brock}}

\AtlasTitle{Users guide to the ATLAS \LaTeX\ package}

\author{Ian Brock}

\AtlasVersion{\ATPackageVersion}

\AtlasAbstract{%
  The usage of the ATLAS \LaTeX\ templates is documented here.
  Guidelines on how to format \BibTeX\ entries are given.

	This document was generated using version \ATPackageVersion\ of the ATLAS \LaTeX\ package.
}

%-------------------------------------------------------------------------------
% This is where the document really begins
%-------------------------------------------------------------------------------
\begin{document}

\tableofcontents
\clearpage

%-------------------------------------------------------------------------------
\section{Introduction}
\label{sec:intro}
%-------------------------------------------------------------------------------

This collection of ATLAS \LaTeX\ templates, style files and documentation
can be used for papers, preprints and notes. 
All necessary files are collected in a single package called \texttt{atlaslatex}.
The package is available from the web pages of the Publication Committee~\cite{pubcom} and from 
SVN~\cite{pubcom-svn}.

The collection replaces and hopefully improves on the previous packages. 
In particular it supersedes:
\begin{itemize}
\item \texttt{atlasnote-00-04-05}
\item \texttt{atlascover-00-00-11}
\item \texttt{atlaspreprint-00-00-05}
\item \texttt{atlasbib-00-00-04}
\end{itemize}
Section~\ref{sec:oldnote} summarises the changes that have been made and
how you can adapt your documents to use the new package.
Section~\ref{sec:oldcover} summarises the changes to the cover macros.

The package includes the \texttt{atlasdoc} class, useful style files
and documentation of the package.
The documentation is provided as both PDF files and \LaTeX\ documents
that should provide examples of how to use the package and how to write
good \LaTeX.

The design principle is that you have a main document and 
the style files and \texttt{atlasdoc} class are in a subdirectory \texttt{style}.
This subdirectory can of course be a link to a centrally maintained \texttt{style} directory.

The usual procedure is that for each document that you create,
you first unpack the latest version of \texttt{atlaslatex} and
then create your main document in the top-level directory.
This structure means that it is easier to update the style files if a new version of
\texttt{atlaslatex} is released. 
Each document can then be independent of the \texttt{atlaslatex} release.

To create a new document you can issue the commands:
%
\begin{verbatim}
make new BASENAME=mydocument
\end{verbatim}
%
This command copies \texttt{atlas-document.tex}, 
{atlas-document-metadata.tex} and {atlas-document-contribute.tex}
to \texttt{mydocument.tex},  \texttt{mydocument-metadata.tex} and
\texttt{mydocument-contribute.tex}.
It also creates empty files \texttt{mydocument-defs.sty} and \texttt{mydocument.bib}.

In the \texttt{Makefile} you should change the \texttt{BASENAME} to the name of your document.
You can then compile your document with the command: \texttt{make}.

Note that you have to specify the language of your document as an option in the
\Macro{documentclass} command. Typical settings are
\begin{itemize}
\item UKenglish (or british)
\item USenglish (or american)
\end{itemize}


%-------------------------------------------------------------------------------
\section{Title, author and document numbers}
\label{sec:metadata}
%-------------------------------------------------------------------------------

An ATLAS document usually collects a series of labels over time.
These include the reference code of the analysis, e.g.\ \texttt{BPHY-2013-04}, 
the ATLAS note number and the CERN preprint number.
In addition the abstract and title are needed on the front page of the document and also on various cover pages.
The editors of the document, the editorial board members and the contributors to the analysis
also need to be specified at some point.

While all this information can be collected in the main file of he document, 
it is probably better to put it all in a separate document.
By default this file is called \texttt{mydocument-metadata.tex}.

%-------------------------------------------------------------------------------
\subsection{Metadata commands}
%-------------------------------------------------------------------------------

The standard list of metadata commands are given below.
More are available for the draft cover page when a paper, CONF note or PUB note draft
is circulated to the collaboration.\\ 
See \texttt{template/atlas-document-metadata.tex} for more details.

\begin{itemize}
  \item {\verb|\AtlasTitle{<Title>}|} typesets the paper title. If not
    given, a dummy title will be produced.

  \item {\verb|\author{<Author>}|} typesets the paper author. If not
    explicitly given, \emph{The ATLAS Collaborations} will be used by
    default. Note that the \verb|\author{}| command is pretty limited
    in case you want to display multiple author names and multiple
    affiliations. For this use case the \verb|authblk.sty| package is
    provided; this is a typical example of its use:
    \begin{verbatim}
\usepackage{authblk}
\renewcommand\Authands{, } % avoid ``. and'' for last author
\renewcommand\Affilfont{\itshape\small} % affiliation formatting

\author[a]{First Author}
\author[a]{Second Author}
\author[b]{Third Author}

\affil[a]{One Institution}
\affil[b]{Another Institution}
    \end{verbatim}

  \item {\verb|\AtlasAbstract{<The abstract text>}|} typesets the
    abstract on the front page and cover page.

  \item {\verb|\date{<Date>}|} typesets the paper date. If not
    explicitly given, the current date (\verb|\today|) will be used.

  \item {\verb|\AtlasVersion{<Draft Version>}|} displays the draft
    version on the front page, a DRAFT banner on all the other page
    headings, and adds line numbers to all text to easy commenting and
    reviewing. Can be omitted.

  \item {\verb|\AtlasJournal{<Journal Name>}|} displays the phrase \emph{to
    be submitted to Journal Name} at the bottom of the front page and
    on the cover page. Can be omitted.

  \item {\verb|\AtlasRefCode{<Reference code>}|} displays the ATLAS
    standard reference code, e.g.\ \texttt{BPHY-2014-03}, on the cover page.

  \item {\verb|\AtlasNote{<Note number>}|} displays the note number
  	for a CONF, PUB, INT or COM note, e.g.\ \texttt{ATLAS-CONF-2014-23},
  	on the front page and cover page

  \item {\verb|\PreprintIdNumber{<Preprint number>}|} displays the CERN
  	preprint number on the front page.

  \item {\verb|\skipbeforetitle{<length>}|} sets the distance between
    the title page header and the note title. The default value should
    be fine for most notes, but in case you have a long list of
    authors or a lengthy abstract you can use this command to buy
    some extra space. Note that \verb|<length>| can also be negative
    (use it at your own risk!).
\end{itemize}

\noindent \texttt{atlas-document.tex} contains a basic skeleton that can be
used to start typing a new note using the \texttt{atlasdoc} class. Many of
the custom commands described above are used in this example file, in
order to demonstrate their use.


%-------------------------------------------------------------------------------
\section{The \texttt{atlasdoc} class}
\label{app:atlasdoc}
%-------------------------------------------------------------------------------

This document has been typeset using the \texttt{atlasdoc.cls} class.

\texttt{atlasdoc.cls} derives from the standard \LaTeX{} {article.cls}
class, thus all the usual commands and options you would have used
with \texttt{article} will work with it. For instance, this document has
been produced using this very simple preamble:
%
\begin{verbatim}
  \documentclass[UKenglish]{style/atlasdoc}
  \usepackage{style/atlaspackage}
  \usepackage{style/atlasphysics}
  \graphicspath{{../},{figures/}}
\end{verbatim}
%
Note that the document language must be specified, otherwise \texttt{babel} will complain.

The \LaTeX\ packages that are used in the document are mostly specified in 
\texttt{style/atlaspackage.sty}.

The style file \texttt{style/atlasphysics.sty} defines a lot of useful
macros for particles and more. See the separate document
\texttt{atlas-physics.pdf}~\cite{atlas-physics} for details.

If you use \Macro{biblatex} you need to add the bibliography information to the preamble as well.
Have a look at the \texttt{template/atlas-document.tex} for example to see how this is done.


%-------------------------------------------------------------------------------
\subsection{Dependencies}
%-------------------------------------------------------------------------------

The \texttt{atlasdoc} class depends on these packages, whose presence in
your system is required:
\begin{itemize}\setlength{\parskip}{0pt}\setlength{\itemsep}{0pt}
\item \texttt{graphicx}
\item \texttt{color}
\item \texttt{babel}
\item \texttt{lineno}
\end{itemize}
These should be installed in any modern \LaTeX{} installation.

\texttt{atlascover} also needs \texttt{hyperref}. 
Have a look at \texttt{templates/atlas-draft-cover.tex} to see how to include it by hand.
You can also simply use \texttt{atlaspackage.sty}

The style file \texttt{atlaspackage.sty} includes further packages.
You can steer how mnay by using the option \texttt{minimal}, \texttt{default} or \texttt{full}.
The minimal set is:
\begin{itemize}\setlength{\parskip}{0pt}\setlength{\itemsep}{0pt}
\item \texttt{inputenc}
\item \texttt{fontenc}
\item \texttt{amsmath}
\item \texttt{txfonts}
\item \texttt{footmisc}
\item \texttt{lineno}
\item \texttt{hyperref}
\end{itemize}

The default set adds in addition:
\begin{itemize}\setlength{\parskip}{0pt}\setlength{\itemsep}{0pt}
\item \texttt{booktabs}
\item \texttt{siunitx}
\item \texttt{subfigure}
\item \texttt{tocloft}
\end{itemize}

Finally the full set includes further packages that may be useful:
\begin{itemize}\setlength{\parskip}{0pt}\setlength{\itemsep}{0pt}
\item \texttt{csquotes}
\item \texttt{longtable}
\item \texttt{rotating}
\end{itemize}

If you wish to use the \texttt{atlascover} package with the 
\texttt{atlasdoc} class, you should usually use the \texttt{coverpage} option of the class:
\begin{verbatim}
  \documentclass[coverpage,UKenglish]{style/atlasdoc}
\end{verbatim}
instead of the the usual \texttt{usepackage} command: this will ensure
that the cover page is produced before the note title page.

You can include \texttt{atlascover} with \Macro{usepackage} if you prefer.
In this case you need the option \texttt{nomaketitle} in the \texttt{atlasdoc} class
and you include the \Macro{maketitle} command after \verb|\begin{documenmt}|.

\texttt{lineno.sty} and \texttt{authblk.sty} are also provided in \texttt{style/other}.
They should be part of a standard \LaTeX\ installation though.


%-------------------------------------------------------------------------------
\section{Symbols in \texttt{atlasphysics.sty}}
\label{sec:atlasphysics}
%-------------------------------------------------------------------------------

Many useful symbols are defined in \texttt{atlasphysics.sty}.
While this used to be a very long file, it has now been split into several smaller files,
which can be included or not using options.


%-------------------------------------------------------------------------------
\section{Platforms and \LaTeX\ Versions}
\label{sec:version}
%-------------------------------------------------------------------------------

The package should work under Linux, MacOS and Windows. It has been tested on:
\begin{description}
\item[Ubuntu 14.04]
	The standard TeX Live installation (package \texttt{texlive}). The following extra packages were installed:
	\texttt{texlive-science}, \texttt{texlive-math-extra}, \texttt{texlive-latex3}, \texttt{texlive-lang-ukenglish};
\item[CentOS 7] Not yet tested; 
\item[Windows 7]
	MikTeX 2.9 (\url{http://miktex.org}) and TeXstudio 2.8.2 (\url{http://texstudio.sourceforge.net});
\item[MacOSX 10.9]
	MacTeX (\url{http://www.tug.org/mactex}) and TeXstudio 2.8.2.
\end{description}

If you want to use the package on lxplus, you should make sure that you use a recent version of TeX Live.
Set your \texttt{PATH} as follows:
\begin{verbatim}
		export PATH=/afs/cern.ch/sw/XML/texlive/latest/bin/x86_64-linux:$PATH
\end{verbatim}

The \texttt{atlasdoc} class works both with \LaTeX{} and PDF\LaTeX{}.

I would expect everything to work with TeXLive 2012 or later.
Before that some option names for \texttt{siunitx} were different, and \texttt{biblatex} and \texttt{biber}
were not really stable.


%-------------------------------------------------------------------------------
\section{Miscellaneous \LaTeX{} tips}
%-------------------------------------------------------------------------------
\label{sec:latex}

\subsection{Graphics}

Use the {\tt graphicx} package \cite{} to include your plots and
figure. The use of older packages like {\tt espfig} is deprecated.
Since the {\tt graphicx} package is required by the {\tt atlasnote}
class, it is automatically loaded when using it, and there is no need
to explicitly included it in the document preamble.

Always include your graphics file without mentioning the file
extension. For instance, if you want to include the \texttt{figure.eps}
file, you should use a syntax like this:
\begin{verbatim}
  \includegraphics[width=\textwidth]{figure}
\end{verbatim}
This will allow you to compile your document using either \LaTeX{} or
pdf\LaTeX{} without changing your source file: you can in fact have
both \texttt{figure.eps} and \texttt{figure.pdf} in your working directory,
and the proper one will be picked up according to the processing method
you choose.

It is a good habit to keep you graphics file in a separate
sub-directory (e.g.\ in \texttt{figure/}. In this case you can include them
by mentioning it explicitly every time:
\begin{verbatim}
  \includegraphics[width=\textwidth]{figures/figure}
\end{verbatim}
or by telling the \texttt{graphicx} package where to look
for them, by using this command:
\begin{verbatim}
  \graphicspath{{figures/}}
\end{verbatim}


\subsection{Definitions}

You can use \verb|\ensuremath| in definitions, so that they will work
in both text mode and math mode, e.g.
\verb|\newcommand{\UoneS}{\ensuremath{\Upsilon(\mathrm{1S})}}| to get
\UoneS{} in either mode (\verb|\UoneS{}| or \verb|$\UoneS$|).


\section{Remarks on units and symbols}

As discussed in the ATLAS Paper Template~\cite{atlas-paper},
it is highly recommended to use a units package to format your units properly.
The package \texttt{siunitx} works very well and is the package of choice.
Alternatives include \texttt{units} and \texttt{hepunits},
which is based on \texttt{SIunits}.

The basic command to use in \texttt{siunitx} is \verb|\SI{20}{\GeV}| to get
\SI{20}{\GeV}. 
There are also several other useful commands for specifying ranges:
\verb|\numrange| for a range of numbers and \verb|SIrange| for a range of numbers with a unit. 
Options exist for specifying how they are formatted.
The options can be set for an individual command or for the whole document.
For example, in this document I have specified the options:
\verb|\sisetup{separate-uncertainty, range-units = repeat, detect-family = true}|.
and
\verb|\sisetup{group-digits=integer, group-minimum-digits=4}|.

In addition several extra units are defined:
\begin{itemize}
\item \verb|\micron| for \si{\micron};
\item \verb|\mrad| for \si{\mrad};
\item \verb|\nb| for \si{\nb};
\item \verb|\pb| for \si{\pb};
\item \verb|\fb| for \si{\fb}.
\end{itemize}
Use the syntax \verb|\SI{20.3}{\per\fb}| to get \SI{20.3}{\per\fb}.

Some things to note about using \texttt{siunitx}:
\begin{itemize}
\item It tries to isolate itself from other packages.
	If you just want to write \si{\GeV} in your text,
	then you must write \verb|\si{\GeV}|.
\item It also contains two new column specifiers for tables ``S'' and ``s'',
	which are extremely useful for formatting tables properly.
\end{itemize}


%-------------------------------------------------------------------------------
\section{From \texttt{atlasnote} to \texttt{atlasdoc}}
\label{sec:oldnote}
%-------------------------------------------------------------------------------

The \texttt{atlasdoc} class replaces and supersedes \texttt{atlasnote}.
The decision was taken to give the class a new name, as it is supposed to be
able to be used for (almost) all ATLAS documents.
Some small changes in the user setup are necessary to use the new
class, style files and templates.

All style files are collected in the \texttt{style} subdirectory.
It is assumed that this directory is a direct subdirectory of you main \LaTeX\ file.
If you want to keep the style files in a central place you can either put them in
\verb|${HOME}/texmf/tex/latex| or create a link from your main directoryto the location of
your \texttt{style} directory.

The main changes the user has to make are:
\begin{itemize}
\item Change the class name from \texttt{atlasnote} to \texttt{style/atlasdoc};
\item Specify the document language as an option: UKenglish or USenglish;
\item Add \verb|\usepackage{style/atlaspackage}| at the beginning of the document;
\item Change \verb|\usepackage{atlasphysics}| to \verb|\usepackage{style/atlasphysics}|; 
\item Use the macro \Macro{AtlasTitle} instead of \Macro{title}.
\end{itemize}

The language specification means that dates etc.\ are also formatted according to 
the document language. 
If you use the package \Macro{csquotes}, quotation symbols are also consistently and properly set
when you use \Macro{enquote}.

All the documentation now uses \texttt{biblatex} and \texttt{biber} instead of \BibTeX.
The templates provide information on how to make the change in your own document.

As of \texttt{atlascover-01-00-00} the same macro names are used in both \texttt{atlasdoc} and
\texttt{atlascover} so that title, journal, version number and abstract only need to be specified once.
This means that if you start from an old preamble the following changes should be made:
\begin{center}
	\begin{tabular}{ll}
		Old	& New\\
		\midrule
		\Macro{title} & \Macro{AtlasTitle}\\
		\Macro{draftversion} & \Macro{AtlasVersion}\\
		\Macro{atlasnote} & \Macro{AtlasNote}\\
		\Macro{journal} & \Macro{AtlasJournal}\\
		\Macro{abstracttext} & \Macro{AtlasAbstract}
	\end{tabular}
\end{center}
If you use the old macro names 
\Macro{draftversion}, \Macro{journal}, \Macro{abstracttext},
they will continue to work in the document itself, but not on the cover page.

The class and style files have been cleaned up and things 
that were thought to no longer be necessary have been removed.
These pieces have been collected in \texttt{style/atlasnote-obsolete.sty} in case they are needed.
If something important has got lost, please let me know.

%-------------------------------------------------------------------------------
\section{Changes in \texttt{atlascover-01-00-00}}
\label{sec:oldcover}
%-------------------------------------------------------------------------------

As of \texttt{atlascover-01-00-00} the same macro names are used in both \texttt{atlasdoc} and
\texttt{atlascover} so that title, journal and version number only need to be specified once.
This means that if you start from an old cover page the following changes have to be made:
\begin{center}
	\begin{tabular}{ll}
		Old	& New\\
		\midrule
		\Macro{AtlasCoverPaperTitle} & \Macro{AtlasTitle}\\
		\Macro{AtlasCoverNumber}  & \Macro{AtlasRefCode}\\
		\Macro{AtlasCoverPaperVersion} & \Macro{AtlasVersion}\\
		\Macro{AtlasCoverJournal} & \Macro{AtlasJournal}\\
		\Macro{AtlasCoverAbstract} & \Macro{AtlasAbstract}
	\end{tabular}
\end{center}
Note that \texttt{atlaspreprint} is integrated into \texttt{atlascover} and not maintained as a separate style file.

\end{document}
